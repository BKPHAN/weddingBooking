<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bộ Sưu Tập Real Weddings - Tràng An Palace</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Montserrat:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <!-- Lightbox2 CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/css/lightbox.min.css" rel="stylesheet">
    <style>
        .collection-hero {
            background-size: cover;
            background-position: center;
            height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .collection-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
        }

        .collection-hero-content {
            position: relative;
            z-index: 2;
            text-align: center;
        }

        .album-card {
            background: #fff;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .album-card:hover {
            transform: translateY(-5px);
        }

        .album-thumb {
            height: 250px;
            overflow: hidden;
            position: relative;
        }

        .album-thumb img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .album-card:hover .album-thumb img {
            transform: scale(1.1);
        }

        .album-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(16, 50, 56, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .album-card:hover .album-overlay {
            opacity: 1;
        }

        .album-details {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            text-align: center;
        }

        .album-title {
            font-family: var(--font-heading);
            color: var(--color-teal);
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        .album-date {
            color: var(--color-text-light);
            font-size: 0.9rem;
            margin-bottom: 15px;
        }
    </style>
</head>

<body>

    <!-- Header Fragment -->
    <div th:replace="~{fragments/header :: header}"></div>

    <!-- Hero Section -->
    <section class="collection-hero"
             th:style="${albumsWithItems != null and !albumsWithItems.isEmpty() and !albumsWithItems[0].items.isEmpty()
                        ? 'background-image: url(' + albumsWithItems[0].items[0].url + ');'
                        : 'background-image: url(/images/gallery/1.jpg);'}">
        <div class="collection-hero-content container">
            <h1 style="font-family: 'Playfair Display', serif; color: white; font-size: 3.5rem; font-weight: 700; margin: 20px 0;">Bộ Sưu Tập Hạnh Phúc</h1>
            <p class="lead">Lưu giữ những khoảnh khắc tuyệt vời nhất tại Tràng An Palace</p>
        </div>
    </section>

    <!-- Intro -->
    <section class="section text-center">
        <div class="container">
            <div class="divider-icon">
                <i class="fas fa-heart"></i>
            </div>
            <h2 class="text-teal">Real Weddings</h2>
            <p class="text-muted" style="max-width: 700px; margin: 0 auto;">Chuyện tình yêu của mỗi cặp đôi là duy nhất.
                Chúng tôi vinh dự được là người kể lại câu chuyện ấy qua không gian tiệc cưới lộng lẫy và những khoảnh
                khắc đầy cảm xúc.</p>
        </div>
    </section>

    <!-- Album Grid -->
    <section class="section" style="background-color: #f9f9f9;">
        <div class="container">
            <div class="grid-col-3" style="gap: 30px;">
                <!-- Dynamic Albums from Database -->
                <div th:each="albumData, iterStat : ${albumsWithItems}" class="album-card">
                    <div class="album-thumb">
                        <!-- Use first image from album as thumbnail -->
                        <img th:src="${!albumData.items.isEmpty() ? albumData.items[0].url : '/images/collection/default-thumb.jpg'}"
                             th:alt="${albumData.album.title}"
                             onerror="this.src='https://placehold.co/400x300?text=Album'">

                        <!-- Lightbox trigger -->
                        <a th:href="${!albumData.items.isEmpty() ? albumData.items[0].url : '#'}"
                           th:attr="data-lightbox='album-' + ${iterStat.index}"
                           th:data-title="${albumData.album.title}"
                           class="album-overlay">
                            <i class="fas fa-images" style="color: #fff; font-size: 2rem;"></i>
                        </a>

                        <!-- Additional images for lightbox (hidden) -->
                        <th:block th:each="item, itemStat : ${albumData.items}" th:if="${itemStat.index > 0}">
                            <a th:href="${item.url}"
                               th:attr="data-lightbox='album-' + ${iterStat.index}"
                               th:data-title="${item.title}"
                               style="display: none;"></a>
                        </th:block>
                    </div>
                    <div class="album-details">
                        <h3 class="album-title" th:text="${albumData.album.title}">Album Title</h3>
                        <p class="album-date">
                            <i class="far fa-calendar-alt"></i>
                            <span th:text="${albumData.album.description != null ? albumData.album.description : 'Wedding Collection'}">Description</span>
                        </p>
                        <button class="btn btn-outline btn-sm"
                                th:onclick="'document.querySelector(\'[data-lightbox=album-' + ${iterStat.index} + ']\').click()'">
                            Xem Album (<span th:text="${albumData.items.size()}">0</span> ảnh)
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer Fragment -->
    <div th:replace="~{fragments/footer :: footer}"></div>

    <!-- Scripts -->
    <script th:src="@{/js/main.js}"></script>
    <!-- Lightbox2 JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/js/lightbox-plus-jquery.min.js"></script>
    <script>
        lightbox.option({
            'resizeDuration': 200,
            'wrapAround': true,
            'albumLabel': "Ảnh %1 / %2"
        })
    </script>
</body>

</html>